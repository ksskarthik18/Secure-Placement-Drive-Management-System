{% extends "base.html" %}

{% block content %}
<div class="page-header">
    <div>
        <h1 class="page-title"><i class="fas fa-clipboard-list"></i> My Applications</h1>
        <p class="page-subtitle">Track the status of your job applications</p>
    </div>
    <a href="{{ url_for('student.dashboard') }}" class="btn btn-outline">
        <i class="fas fa-arrow-left"></i> Back
    </a>
</div>

{% if applications %}
<div class="card">
    <div class="table-container">
        <table>
            <thead>
                <tr>
                    <th>Job Title</th>
                    <th>Company</th>
                    <th>Applied On</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                {% for app in applications %}
                <tr>
                    <td><strong>{{ app.job_title }}</strong></td>
                    <td>
                        <i class="fas fa-building"></i> {{ app.company }}
                    </td>
                    <td>
                        <i class="fas fa-calendar"></i> {{ app.date_applied.strftime('%d %b %Y') }}
                    </td>
                    <td>
                        {% if app.status == 'Applied' %}
                        <span class="badge badge-info"><i class="fas fa-clock"></i> {{ app.status }}</span>
                        {% elif app.status == 'Shortlisted' %}
                        <span class="badge badge-success"><i class="fas fa-check"></i> {{ app.status }}</span>
                        {% elif app.status == 'Rejected' %}
                        <span class="badge badge-danger"><i class="fas fa-times"></i> {{ app.status }}</span>
                        {% else %}
                        <span class="badge badge-warning">{{ app.status }}</span>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<div class="stats-grid" style="grid-template-columns: repeat(3, 1fr);">
    <div class="stat-card">
        <div class="stat-icon blue">
            <i class="fas fa-paper-plane"></i>
        </div>
        <div class="stat-content">
            <h3>{{ applications|length }}</h3>
            <p>Total Applications</p>
        </div>
    </div>

    <div class="stat-card">
        <div class="stat-icon green">
            <i class="fas fa-check-circle"></i>
        </div>
        <div class="stat-content">
            <h3>{{ applications|selectattr('status', 'equalto', 'Shortlisted')|list|length }}</h3>
            <p>Shortlisted</p>
        </div>
    </div>

    <div class="stat-card">
        <div class="stat-icon yellow">
            <i class="fas fa-hourglass-half"></i>
        </div>
        <div class="stat-content">
            <h3>{{ applications|selectattr('status', 'equalto', 'Applied')|list|length }}</h3>
            <p>Pending</p>
        </div>
    </div>
</div>

{% else %}
<div class="card">
    <div class="empty-state">
        <i class="fas fa-clipboard"></i>
        <h3>No Applications Yet</h3>
        <p>You haven't applied to any jobs yet.</p>
        <a href="{{ url_for('student.view_jobs') }}" class="btn btn-primary mt-2">
            <i class="fas fa-briefcase"></i> Browse Jobs
        </a>
    </div>
</div>
{% endif %}
{% endblock %}